# 9牌-银河往事：UI布局与切换流程

## 一、核心UI屏幕

### 1. 主菜单 (MainMenu)
```
┌─────────────────────────────────────────┐
│                                         │
│           9牌-银河往事                   │
│                                         │
│        ┌───────────────┐               │
│        │   开始游戏     │               │
│        └───────────────┘               │
│        ┌───────────────┐               │
│        │   继续游戏     │               │
│        └───────────────┘               │
│        ┌───────────────┐               │
│        │   设置        │               │
│        └───────────────┘               │
│                                         │
└─────────────────────────────────────────┘
```
- 背景：星际酒馆外景
- 按钮：开始游戏、继续游戏、设置

### 2. 招待所主界面 (HostelScreen)
```
┌─────────────────────────────────────────┐
│  银河招待所                    [设置]   │
├─────────────────────────────────────────┤
│                                         │
│  ┌─────┐  ┌─────┐  ┌─────┐            │
│  │第1关│  │第2关│  │第3关│ ...        │
│  └─────┘  └─────┘  └─────┘            │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │      已解锁角色展示区            │   │
│  │  [角色1] [角色2] [角色3] ...    │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │      剧情钥匙收集进度            │   │
│  │  ████████░░ 80%                 │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [酒谱升级]  [线索画廊]  [开始关卡]    │
└─────────────────────────────────────────┘
```
- 顶部：标题+设置按钮
- 中间：关卡选择（16关）
- 下方：已解锁角色、钥匙进度
- 底部：功能按钮

### 3. 游戏桌界面 (GameTableScreen) - 核心界面
```
┌─────────────────────────────────────────┐
│  第X关                回合: X/总轮数    │
├─────────────────────────────────────────┤
│                                         │
│  ┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐   │
│  │NPC A│  │NPC B│  │玩家 │  │NPC C│   │
│  │酒量 │  │酒量 │  │酒量 │  │酒量 │   │
│  │[头  │  │[头  │  │[头  │  │[头  │   │
│  │ 像] │  │ 像] │  │ 像] │  │ 像] │   │
│  └─────┘  └─────┘  └─────┘  └─────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │                                 │   │
│  │      9张卡牌区域 (3×3)          │   │
│  │                                 │   │
│  │   ┌───┐ ┌───┐ ┌───┐            │   │
│  │   │ 1 │ │ 2 │ │ 3 │            │   │
│  │   └───┘ └───┘ └───┘            │   │
│  │   ┌───┐ ┌───┐ ┌───┐            │   │
│  │   │ 4 │ │ 5 │ │ 6 │            │   │
│  │   └───┘ └───┘ └───┘            │   │
│  │   ┌───┐ ┌───┐ ┌───┐            │   │
│  │   │ 7 │ │ 8 │ │ 9 │            │   │
│  │   └───┘ └───┘ └───┘            │   │
│  │                                 │   │
│  │   [点击确认后翻面]              │   │
│  │                                 │   │
│  └─────────────────────────────────┘   │
│                                         │
│  当前杯数: X杯    酒类型: XX酒          │
│                                         │
│  ┌──────────┐      ┌──────────┐       │
│  │  抽牌    │      │ 使用道具 │       │
│  └──────────┘      └──────────┘       │
│                                         │
│  [道具牌展示区: 厕所牌x1 ...]           │
└─────────────────────────────────────────┘
```
- 顶部：关卡信息+回合数
- 上部：4个角色头像+血量显示
- 中部：9张卡牌区域（核心交互区）
- 下部：杯数显示、操作按钮
- 底部：道具牌展示

### 4. 结算界面 (SettlementScreen)
```
┌─────────────────────────────────────────┐
│            本局结算                      │
├─────────────────────────────────────────┤
│                                         │
│  ┌─────────────────────────────────┐   │
│  │                                 │   │
│  │     结算结果展示                │   │
│  │                                 │   │
│  │   NPC A 喝醉了！                │   │
│  │                                 │   │
│  │   获得：                        │   │
│  │   🗝️ 白月光的酒后胡话           │   │
│  │                                 │   │
│  └─────────────────────────────────┘   │
│                                         │
│  好感度变化：                            │
│  NPC A: +10  NPC B: +5  NPC C: -3      │
│                                         │
│  ┌──────────┐      ┌──────────┐       │
│  │ 继续剧情 │      │ 返回招待所│       │
│  └──────────┘      └──────────┘       │
│                                         │
└─────────────────────────────────────────┘
```

### 5. 剧情对话界面 (DialogScreen)
```
┌─────────────────────────────────────────┐
│                                         │
│           [角色立绘]                    │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 角色名称                        │   │
│  ├─────────────────────────────────┤   │
│  │                                 │   │
│  │ 对话内容...                     │   │
│  │                                 │   │
│  │ [点击继续]                      │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌────────┐ ┌────────┐ ┌────────┐    │
│  │ 选项1  │ │ 选项2  │ │ 选项3  │    │
│  └────────┘ └────────┘ └────────┘    │
│                                         │
└─────────────────────────────────────────┘
```

---

## 二、UI切换流程

```
[启动]
   ↓
[MainMenu] ──开始游戏──→ [HostelScreen]
   │                          │
   └──继续游戏───────────────┘
                              │
                              │ 选择关卡
                              ↓
                    [GameTableScreen]
                              │
           ┌──────────────────┼──────────────────┐
           │                  │                  │
           ↓                  ↓                  ↓
    [DialogScreen]    [SettlementScreen]   [HostelScreen]
    (剧情对话)          (结算)               (返回)
           │                  │
           └──────────────────┘
                              ↓
                    [HostelScreen]
```

### 详细流程

1. **MainMenu → HostelScreen**
   - 点击"开始游戏"或"继续游戏"
   - 淡入淡出转场
   - 加载存档数据

2. **HostelScreen → GameTableScreen**
   - 选择关卡后点击"开始"
   - 滑入转场
   - 初始化游戏数据
   - 展示9张牌翻开动画

3. **GameTableScreen 内部流程**
   ```
   开始回合
      ↓
   当前玩家高亮
      ↓
   等待玩家选择（抽牌/道具）
      ↓
   执行动作 → 卡牌效果动画
      ↓
   更新血量/状态
      ↓
   检查是否有人喝醉
      ↓
   是 → SettlementScreen
   否 → 下一玩家回合
   ```

4. **GameTableScreen → SettlementScreen**
   - 有人喝醉触发
   - 缩放转场
   - 展示结算信息

5. **SettlementScreen → DialogScreen/HostelScreen**
   - 点击"继续剧情" → 触发对话
   - 点击"返回招待所" → 返回主界面

---

## 三、关键UI组件

### 1. 卡牌按钮 (CardButton)
```
┌────────┐
│  🎴    │  <- 卡牌图标/花色
│        │
│  A     │  <- 牌面/数字
│        │
│  ♠     │  <- 花色
└────────┘
```
- 状态：正面/背面
- 动画：翻转、悬浮、点击

### 2. 角色面板 (CharacterPanel)
```
┌────────┐
│  [头像] │
├────────┤
│  名称   │
├────────┤
│酒量: 8/10│ <- 血条
│好感: 25 │
└────────┘
```

### 3. 9张牌网格 (NineCardGrid)
- 3×3 网格布局
- 支持点击交互
- 翻开/翻面动画
- 补牌动画

### 4. 对话框 (DialogBox)
- 打字机效果文字
- 角色立绘展示
- 选项按钮（如果是选择题）

---

## 四、响应式设计

### 分辨率适配
- 基础分辨率：1920×1080
- 支持缩放：16:9 比例
- 最小分辨率：1280×720

### 布局规则
- 使用Container布局
- 相对定位
- 自动缩放UI元素
